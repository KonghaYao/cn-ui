---
layout: ../../../layouts/Markdown.astro
title: å¤æ‚åŸå­
author: æ±Ÿå¤å°§
description: å…³äºå¤æ‚åŸå­
---

## å¤æ‚åŸå­

ç›¸å¯¹äº `string`ã€`number`ï¼Œ`FormData`ï¼Œ`Date`ç­‰å¯¹è±¡å¯ä»¥è®¤ä¸ºæ˜¯å¤æ‚çš„ä¸€äº›å¯¹è±¡ï¼Œé‚£ä¹ˆå¯¹äºè¿™äº›å¤æ‚çš„å¯¹è±¡ï¼Œæˆ‘ä»¬æä¾›äº†éå¸¸æ–¹ä¾¿çš„å°è£…ï¼Œè¿™äº›å°è£…åçš„å“åº”å¼åŸå­ç§°ä¸ºå¤æ‚åŸå­ã€‚

> æ³¨æ„ï¼šå½“å‰ç‰ˆæœ¬é‡‡ç”¨å‡½æ•°ä¿®é¥°å¯¹è±¡çš„æ–¹å¼è¿›è¡Œæ›´æ”¹ã€‚å¦‚æœä½ è¾“å…¥äº†ä¸€ä¸ª Atomï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†ä¼šåœ¨è¿™ä¸ª Atom çš„æœ¬èº«è¿›è¡Œä¸€ä¸ªè½¬æ¢ï¼ŒAtom çš„è¯»å†™æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯å¯èƒ½ä¼šå¤±å» reflux ç­‰åŠŸèƒ½ã€‚

## å¤„ç† Arrayï¼Ÿä½¿ç”¨ ArrayAtom ä¿®é¥°ï¼

ä¸€èˆ¬æ¥è¯´ï¼Œé¡µé¢åˆ—è¡¨åˆ†é¡µå¤„ç†çš„è¯ï¼Œå°†ä¼šä½¿ç”¨åˆ°æ•°ç»„çš„æ¸²æŸ“ï¼Œé‚£ä¹ˆæ•°ç»„é‡Œé¢æˆ‘æƒ³è¦åˆ é™¤ï¼Œç§»åŠ¨ï¼Œæ›´æ–°ç­‰ï¼Œéƒ½æ˜¯éå¸¸é«˜é‡å¤ç‡çš„äº‹æƒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠè¿™äº›é€»è¾‘é›†æˆåˆ°äº†è¿™é‡Œã€‚

> æ³¨æ„ ArrayAtom çš„æ“ä½œéƒ½æ˜¯åŸºäºç›¸å¯¹ä½ç½®è¿›è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¾“å…¥å€¼ï¼Œæˆ‘ä»¬å°†åˆ é™¤è¿™ä¸ªå€¼ï¼Œæ‰€ä»¥è¯·å°½é‡ä¸è¦å€¼é‡å¤ï¼Œè¿™ä¸ªå¯èƒ½ä¼šå¼•èµ·ç›¸å¯¹å¼•ç”¨çš„ BUGã€‚
> åŒæ—¶ ArrayAtom çš„å·¥å…·éƒ½æ˜¯è¿›è¡Œä¿®æ”¹çš„ï¼Œå¹¶ä¸æ˜¯è¿›è¡Œè¿­ä»£çš„ï¼Œæ‰€ä»¥ mapï¼ŒforEach ç­‰åŠŸèƒ½éœ€è¦è·å–å€¼è¿›è¡Œã€‚

```tsx
// Yes, æˆ‘ä»¬æœ‰ mock æ•°ç»„çš„æ–¹å¼ğŸ˜„
const a = genArray(10).map((i) => i.toString());

const arr = ArrayAtom(a);
arr.replace('2', 'Origin 2'); // ç›´æ¥æ›¿æ¢å®ƒ
arr.switch('3', '1');
arr.insert('1', '3', 'after'); // æŠŠ 1 åµŒå…¥åˆ° 3 åé¢
```

## å¤„ç†è¡¨å•ï¼Ÿè¯•è¯• ObjectAtomï¼

åœ¨é¡¹ç›®ä¸­ï¼Œæ˜¯å¦ç»å¸¸é‡åˆ° Form è¡¨å•ï¼ŒURLSearchParams çš„æ„å»ºé—®é¢˜ï¼Ÿè¿™äº›å…¶å®åº”è¯¥å½’ä¸ºå¯¹è±¡ç±»å‹çš„æ•°æ®å¼€å‘ï¼Œéœ€è¦æ¯ä¸ªé”®å€¼åœ°æ“ä½œå¯¹è±¡å±æ€§ï¼Œä½†æ˜¯æœ€ç»ˆå´è¦æ±‡æ€»ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ ObjectAtom å°±å¾ˆå¥½ç”¨äº†ã€‚ObjectAtom å°†è¾“å…¥çš„å¯¹åƒå’Œå®ƒçš„å“åº”å¼é”®å€¼å¯¹è”ç³»åœ¨ä¸€èµ·ï¼Œä»»ä½•å“åº”å¼é”®å€¼å¯¹çš„å˜åŒ–ï¼Œè¿™ä¸ªå¯¹è±¡ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°ï¼Œè€Œä¸”éƒ½æ˜¯ Atomï¼Œå…·æœ‰ä¸€æ ·çš„åŠŸèƒ½ï¼Œè¿™å°±ä½¿å¾—æ•´ä¸ªè¿‡ç¨‹å˜å¾—åè°ƒå’Œç»Ÿä¸€ã€‚

```tsx
// è¡¨å•å¡«å†™åœ¨æ­¤ç§é€»è¾‘ä¸‹ï¼Œç›´æ¥å˜æˆäº†çº¯ç²¹çš„æ•°æ®é€»è¾‘ï¼Œè„±ç¦»äº†ä»»ä½•çš„ç»“æ„æ ·å¼ã€‚
const fd = ObjectAtom({
    username: '',
    password: '',
    email: '',
});

fd.username('æ±Ÿå¤å°§'); // yes, æ¯ä¸ªé”®éƒ½å˜æˆäº†ä¸€ä¸ª Atom!
fd.password('123456789'); // yes, æ¯ä¸ªé”®éƒ½å˜æˆäº†ä¸€ä¸ª Atom!
fd.email('1234567@gh.com'); // yes, æ¯ä¸ªé”®éƒ½å˜æˆäº†ä¸€ä¸ª Atom!

fd(); // å˜¿ï¼Œè‡ªåŠ¨å¸®ä½ æ”¶é›†å¥½äº†

EntriesTransform(fd).toFormData(); // å˜æˆ FormData äº†ğŸ˜‚
```

### EntriesTransform è½¬æ¢æˆå„ç§å…¶ä»–å¯¹è±¡

ObjectAtom å¤„ç†çš„æ˜¯çº¯ç²¹çš„å¯¹è±¡ç±»å‹ï¼Œä½†æ˜¯åœ¨ Web å¼€å‘ä¸­ç»å¸¸ä¼šæœ‰ FormDataã€Headers å¯¹è±¡ï¼Œè¿™äº›ä¸ªç±»å‹é‡‡ç”¨çš„æ˜¯ setã€append ç­‰æ–¹å¼è¿›è¡Œæ”¹å˜çš„å¯¹è±¡ã€‚ä½†å…¶å®å¯ä»¥ä½¿ç”¨çº¯ç²¹å¯¹è±¡è¿›è¡Œè½¬æ¢ï¼ŒEntriesTransform å°±æ˜¯è¿™æ ·çš„å·¥å…·ã€‚

> Headersã€FormData ç­‰æ˜¯å¯ä»¥ä½¿ç”¨é‡å¤é”®çš„ï¼Œæ¯”å¦‚ append æ“ä½œï¼Œä½†æ˜¯åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œé‡å¤é”®è¿™ä¸ªç‰¹æ€§æ²¡æœ‰ä½¿ç”¨ç©ºé—´ï¼Œé‚£ä¹ˆè¿˜ä¸å¦‚ç›´æ¥ä½¿ç”¨å¯¹è±¡ç®€å•ï¼Œæ‰€ä»¥é‡‡ç”¨è½¬æ¢æ–¹å¼æ¯”è¾ƒåˆé€‚ã€‚

```tsx
EntriesTransform(fd).toFormData();
EntriesTransform(fd).toHeaders();
EntriesTransform(fd).toMaps();
// ...
```
